<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RiskEngine Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        body { background-color: #f8f9fa; padding-top: 20px; }
        .card { margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .nav-pills .nav-link.active { background-color: #0d6efd; }
        .status-badge { font-size: 0.8em; margin-left: 10px; }
    </style>
</head>
<body>

<div id="app" class="container">
    <div class="text-center mb-4">
        <h1>üõ°Ô∏è InsurTech Inspector</h1>
        <p class="text-muted">–ü—Ä–æ—Ç–æ—Ç–∏–ø —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</p>
    </div>

    <ul class="nav nav-pills mb-4 justify-content-center" id="pills-tab">
        <li class="nav-item">
            <button class="nav-link" :class="{ active: currentTab === 'admin' }" @click="currentTab = 'admin'">
                1. –ê–¥–º–∏–Ω–∫–∞ (–ò–Ω–∂–µ–Ω–µ—Ä)
            </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" :class="{ active: currentTab === 'inspection' }" @click="currentTab = 'inspection'">
                2. –û—Å–º–æ—Ç—Ä (–ö–ª–∏–µ–Ω—Ç)
            </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" :class="{ active: currentTab === 'report' }" @click="currentTab = 'report'">
                3. –û—Ç—á–µ—Ç (–ò–Ω–∂–µ–Ω–µ—Ä)
            </button>
        </li>
    </ul>

    <div v-if="currentTab === 'admin'">
        <div class="card">
            <div class="card-header bg-primary text-white">
                –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∞–≤–∏–ª (Knowledge Base)
            </div>
            <div class="card-body">
                <p>–ó–¥–µ—Å—å –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏ –∑–∞–¥–∞—é—Ç –ª–æ–≥–∏–∫—É: <b>–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ X ‚Üí –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å Y</b></p>
                
                <div class="row g-3 align-items-end mb-3">
                    <div class="col-md-5">
                        <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∏—Å–∫–∞ (–ø—É–Ω–∫—Ç –∞–Ω–∫–µ—Ç—ã)</label>
                        <input type="text" class="form-control" v-model="newRule.risk" placeholder="–ù–∞–ø—Ä: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ê–ü–°">
                    </div>
                    <div class="col-md-5">
                        <label class="form-label">–ê–≤—Ç–æ-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</label>
                        <input type="text" class="form-control" v-model="newRule.recommendation" placeholder="–ù–∞–ø—Ä: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—á–∏–∫–∏ –¥—ã–º–∞">
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-success w-100" @click="addRule">–î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                </div>

                <hr>
                <h5>–ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ –±–∞–∑–µ:</h5>
                <ul class="list-group">
                    <li class="list-group-item d-flex justify-content-between align-items-center" v-for="(rule, index) in rules" :key="index">
                        <div>
                            <strong>–ï—Å–ª–∏:</strong> {{ rule.risk }} <br>
                            <span class="text-success"><strong>–¢–æ:</strong> {{ rule.recommendation }}</span>
                        </div>
                        <button class="btn btn-sm btn-outline-danger" @click="deleteRule(index)">–£–¥–∞–ª–∏—Ç—å</button>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div v-if="currentTab === 'inspection'">
        <div class="card">
            <div class="card-header bg-warning text-dark">
                –õ–∏—Å—Ç –æ—Å–º–æ—Ç—Ä–∞ –æ–±—ä–µ–∫—Ç–∞
            </div>
            <div class="card-body">
                <p>–ò–Ω–∂–µ–Ω–µ—Ä –ø—Ä–æ–≤–æ–¥–∏—Ç –æ—Å–º–æ—Ç—Ä –∏ –æ—Ç–º–µ—á–∞–µ—Ç –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏.</p>
                <div class="mb-3">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞</label>
                    <input type="text" class="form-control" v-model="inspectionData.objectName" placeholder="–°–∫–ª–∞–¥ –û–û–û '–†–æ–º–∞—à–∫–∞'">
                </div>

                <h5>–ß–µ–∫-–ª–∏—Å—Ç —Ä–∏—Å–∫–æ–≤:</h5>
                <div v-if="rules.length === 0" class="alert alert-warning">
                    –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø—É—Å—Ç–∞. –ó–∞–π–¥–∏—Ç–µ –≤ "–ê–¥–º–∏–Ω–∫—É" –∏ –¥–æ–±–∞–≤—å—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Å–º–æ—Ç—Ä–∞.
                </div>
                
                <div class="form-check mb-2" v-for="(rule, index) in rules" :key="index">
                    <input class="form-check-input" type="checkbox" :id="'risk'+index" :value="rule" v-model="inspectionData.selectedRisks">
                    <label class="form-check-label" :for="'risk'+index">
                        {{ rule.risk }}
                    </label>
                </div>

                <button class="btn btn-primary mt-3" @click="generateReport">–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ—Å–º–æ—Ç—Ä –∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç</button>
            </div>
        </div>
    </div>

    <div v-if="currentTab === 'report'">
        <div class="card">
            <div class="card-header bg-success text-white">
                –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ —Ä–∏—Å–∫–∞–º
            </div>
            <div class="card-body" id="printArea">
                <h4>–û–±—ä–µ–∫—Ç: {{ inspectionData.objectName || '–ù–µ —É–∫–∞–∑–∞–Ω' }}</h4>
                <hr>
                <h5>–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h5>
                
                <div v-if="inspectionData.selectedRisks.length === 0">
                    <p class="text-success">–ù–∞—Ä—É—à–µ–Ω–∏–π –Ω–µ –≤—ã—è–≤–ª–µ–Ω–æ. –û–±—ä–µ–∫—Ç –≤ –∏–¥–µ–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.</p>
                </div>

                <table class="table table-bordered mt-3" v-else>
                    <thead class="table-light">
                        <tr>
                            <th>–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–π —Ä–∏—Å–∫</th>
                            <th>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="item in inspectionData.selectedRisks">
                            <td>{{ item.risk }}</td>
                            <td class="text-success fw-bold">{{ item.recommendation }}</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="alert alert-info mt-4">
                    –≠—Ç–æ –¥–µ–º–æ. –í —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ —É–π–¥—É—Ç –≤ Word.
                </div>
                <button class="btn btn-outline-secondary" @click="currentTab = 'inspection'">–ù–∞–∑–∞–¥ –∫ –æ—Å–º–æ—Ç—Ä—É</button>
            </div>
        </div>
    </div>

</div>

<script>
    const { createApp } = Vue

    createApp({
        data() {
            return {
                currentTab: 'admin', // admin, inspection, report
                // –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–∞—Ä–∞ –ø—Ä–∏–º–µ—Ä–æ–≤)
                rules: [
                    { risk: '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∂–∞—Ä–æ—Ç—É—à–µ–Ω–∏—è', recommendation: '–°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ê–£–ü–¢' },
                    { risk: '–ì–æ—Ä—ã –º—É—Å–æ—Ä–∞ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏', recommendation: '–û–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –≤—ã–≤–æ–∑ –¢–ë–û' }
                ],
                // –î–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
                newRule: { risk: '', recommendation: '' },
                // –î–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –æ—Å–º–æ—Ç—Ä–∞
                inspectionData: {
                    objectName: '',
                    selectedRisks: [] 
                }
            }
        },
        mounted() {
            // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞
            const savedRules = localStorage.getItem('demo_rules');
            if (savedRules) {
                this.rules = JSON.parse(savedRules);
            }
        },
        methods: {
            addRule() {
                if(this.newRule.risk && this.newRule.recommendation) {
                    this.rules.push({ ...this.newRule });
                    this.newRule.risk = '';
                    this.newRule.recommendation = '';
                    this.saveRules();
                } else {
                    alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±–∞ –ø–æ–ª—è!');
                }
            },
            deleteRule(index) {
                this.rules.splice(index, 1);
                this.saveRules();
            },
            saveRules() {
                localStorage.setItem('demo_rules', JSON.stringify(this.rules));
            },
            generateReport() {
                this.currentTab = 'report';
            }
        }
    }).mount('#app')
</script>

</body>
</html>
